# 本番デプロイ手順書（テンプレート）

作成者: Worker3
作成日時: 2025-07-17 12:03
対象システム: 地域別クリニックランキングサイト + 管理画面

## デプロイ概要
- **フロントエンド**: 地域別ランキング表示サイト
- **管理画面**: CSVファイル管理システム
- **データベース**: CSVファイルベース
- **インフラ**: [実装後に記載]

## 事前準備

### 1. 環境要件
- [ ] Webサーバー（Apache/Nginx/IIS等）
- [ ] Python 3.x（管理画面用）
- [ ] 静的ファイルホスティング対応
- [ ] HTTPS証明書設定

### 2. ファイル構成確認
```
production/
├── public/              # フロントエンド
│   ├── index.html
│   ├── app.js
│   ├── data-manager.js
│   ├── styles.css
│   └── data/
├── admin/               # 管理画面
│   └── [Worker1,2実装内容]
└── docs/               # ドキュメント
```

### 3. セキュリティ設定
- [ ] ファイルアップロード制限設定
- [ ] 不正アクセス防止設定
- [ ] CSRF対策確認
- [ ] XSS対策確認

## デプロイ手順

### ステップ1: バックアップ
```bash
# 現在の本番環境をバックアップ
tar -czf backup-$(date +%Y%m%d-%H%M%S).tar.gz /path/to/production
```

### ステップ2: ファイル配置
```bash
# フロントエンドファイル配置
cp -r public/* /path/to/production/

# 管理画面ファイル配置
cp -r admin/* /path/to/production/admin/
```

### ステップ3: 権限設定
```bash
# 適切な権限設定
find /path/to/production -type f -exec chmod 644 {} \;
find /path/to/production -type d -exec chmod 755 {} \;
```

### ステップ4: Webサーバー設定
[実装内容に応じて追記]

### ステップ5: 動作確認
- [ ] フロントエンド表示確認
- [ ] 管理画面アクセス確認
- [ ] CSVアップロード機能確認
- [ ] エラーハンドリング確認

## ロールバック手順

### 緊急時ロールバック
```bash
# バックアップからの復元
cd /path/to/production
rm -rf ./*
tar -xzf backup-YYYYMMDD-HHMMSS.tar.gz
```

## 監視・メンテナンス

### 監視項目
- [ ] アクセスログの監視
- [ ] エラーログの監視
- [ ] ディスク使用量監視
- [ ] レスポンス時間監視

### 定期メンテナンス
- [ ] ログファイルのローテーション
- [ ] バックアップファイルの定期取得
- [ ] セキュリティアップデート適用

## トラブルシューティング

### よくある問題
[テスト結果に基づいて追記予定]

### 緊急連絡先
- 技術責任者: [連絡先]
- 運用担当者: [連絡先]

## 注意事項
- デプロイ作業は営業時間外に実施
- ロールバック準備を事前に完了
- 動作確認は複数ブラウザで実施