# 医療痩身クリニック比較表 - 実装&エラー解消 TODOs

## 📋 概要
医療痩身クリニック比較表の実装完了とエラー解消のためのタスクリスト

## 🎯 目標
- Vercel環境での表示問題を完全に解決
- 全デバイスで正しい5列表示を実現
- パフォーマンスとユーザビリティの向上

---

## 🔴 優先度：高

### 1. 比較表の表示確認 - Vercel環境での動作検証
**目的**: 本番環境での表示問題を特定
- [ ] Vercel環境にアクセスして現状確認
- [ ] 各タブ（総合/施術内容/サービス）での表示状態を記録
- [ ] スクリーンショットを撮影して問題箇所を明確化
- [ ] ローカル環境との差異を文書化

### 2. 列ズレ問題の根本原因調査 - ブラウザ開発者ツールでの確認
**目的**: 列ズレの技術的原因を特定
- [ ] Chrome DevToolsで要素の計算済みスタイルを確認
- [ ] テーブルの各列の実際の幅を測定
- [ ] display:noneが正しく適用されているか確認
- [ ] JavaScriptエラーの有無をコンソールで確認

### 3. CSSの列幅計算ロジック改善 - table-layout:autoの動作確認
**目的**: 列幅の自動計算を最適化
- [ ] table-layout: autoの挙動を詳細に検証
- [ ] 明示的な列幅指定の追加を検討
- [ ] flexboxやgridへの移行可能性を評価
- [ ] ブラウザ間の互換性を確認

---

## 🟡 優先度：中

### 4. JavaScriptのDOM操作最適化 - タブ切り替え時の再描画処理
**目的**: スムーズなタブ切り替えを実現
- [ ] 現在のDOM操作のパフォーマンスを測定
- [ ] requestAnimationFrameの使用を検討
- [ ] バッチ処理でのDOM更新を実装
- [ ] 不要な再描画を削減

### 5. レスポンシブ表示の検証 - 375px/768px/1024pxでの表示確認
**目的**: 全デバイスで適切な表示を保証
- [ ] iPhone SE (375px) での表示テスト
- [ ] iPad (768px) での表示テスト
- [ ] デスクトップ (1024px+) での表示テスト
- [ ] ブレークポイントでの切り替わりを確認

---

## 🟢 優先度：低

### 6. キャッシュクリア対策 - メタタグやバージョニング追加
**目的**: 更新が確実に反映されるように
- [ ] CSSファイルにバージョンパラメータ追加
- [ ] no-cacheメタタグの追加を検討
- [ ] Service Workerのキャッシュ戦略を確認
- [ ] CDNキャッシュの設定を確認

### 7. Playwrightテストスクリプト作成 - 自動検証環境構築
**目的**: 回帰テストの自動化
- [ ] 比較表の表示テストケース作成
- [ ] タブ切り替えのE2Eテスト実装
- [ ] レスポンシブ表示の自動検証
- [ ] CI/CDパイプラインへの統合

### 8. パフォーマンス測定 - Lighthouse実行と最適化
**目的**: ページ速度の最適化
- [ ] Lighthouse初回測定
- [ ] 画像の最適化（WebP形式への変換）
- [ ] CSSの最小化とクリティカルCSSの抽出
- [ ] JavaScriptの遅延読み込み実装

---

## 📊 進捗管理

### 完了基準
- [ ] Vercel環境で5列が正しく表示される
- [ ] タブ切り替えが滑らかに動作する
- [ ] 全デバイスで列ズレがない
- [ ] Lighthouseスコア90以上

### 推定工数
- 優先度高: 4-6時間
- 優先度中: 2-3時間
- 優先度低: 3-4時間
- **合計: 9-13時間**

---

## 📝 メモ
- 問題はVercel環境でのみ発生（ローカルでは正常）
- ブラウザキャッシュが原因の可能性あり
- table-layoutの挙動がブラウザによって異なる可能性

最終更新: 2025-01-21