<!-- 比較表セクション Design 1 -->
<section class="comparison-section">
    <div class="section-title">
        <h2>クリニック比較表</h2>
    </div>
    
    <div class="comparison-container">
        <div class="comparison-tab-menu">
            <div class="comparison-tab-menu-item tab-active" data-tab="tab1">総合</div>
            <div class="comparison-tab-menu-item" data-tab="tab2">施術内容</div>
            <div class="comparison-tab-menu-item" data-tab="tab3">サービス</div>
        </div>
        
        <div class="comparison-table" data-active-tab="tab1">
            <table>
                <thead>
                    <tr>
                        <th>クリニック名</th>
                        <th>価格</th>
                        <th>人気度</th>
                        <th>満足度</th>
                        <th class="th-none" style="display: none;">施術の種類</th>
                        <th class="th-none" style="display: none;">対応部位</th>
                        <th class="th-none" style="display: none;">機器の種類</th>
                        <th class="th-none" style="display: none;">店舗数</th>
                        <th class="th-none" style="display: none;">特典・割引</th>
                        <th class="th-none" style="display: none;">返金保証</th>
                        <th>詳細</th>
                    </tr>
                </thead>
                <tbody id="comparison-table-body">
                    <!-- 比較表の内容はapp.jsから動的に挿入される -->
                </tbody>
            </table>
        </div>
    </div>
</section>

<script>
// 比較表のタブ切り替え機能
const tabMenuItems = document.querySelectorAll('.comparison-tab-menu-item');
const table = document.querySelector('.comparison-table table');

function updateTableColumns(tabType) {
    if (!table) return;
    
    const tableContainer = document.querySelector('.comparison-table');
    const headers = table.querySelectorAll('th');
    const rows = table.querySelectorAll('tbody tr');
    
    const tabColumnsMap = {
        'tab1': [0, 1, 2, 3, 10],      // 総合
        'tab2': [0, 4, 5, 6, 10],      // 施術内容
        'tab3': [0, 7, 8, 9, 10]       // サービス
    };
    
    const showIndexes = tabColumnsMap[tabType] || tabColumnsMap['tab1'];
    
    tableContainer.setAttribute('data-active-tab', tabType);
    
    requestAnimationFrame(() => {
        headers.forEach((th, index) => {
            th.style.display = showIndexes.includes(index) ? '' : 'none';
        });
        
        rows.forEach(row => {
            const cells = row.querySelectorAll('td');
            cells.forEach((td, index) => {
                td.style.display = showIndexes.includes(index) ? '' : 'none';
            });
        });
    });
}

tabMenuItems.forEach(item => {
    item.addEventListener('click', function() {
        tabMenuItems.forEach(tab => tab.classList.remove('tab-active'));
        this.classList.add('tab-active');
        const tabType = this.getAttribute('data-tab');
        updateTableColumns(tabType);
    });
});

// 初期表示
updateTableColumns('tab1');

// app.jsの初期化はメインページで行われる
</script>